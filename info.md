# Инструкция для работы с Git и удалёнными репозиториями

## Что такое Git?

Git - это одна из реализаций распределённых систем контроля версий, имеющая как и локальные, так и удалённые репозитории. Является самой популярной реализацией систем контроля версий в мире.

## Подготовка репозитория

Для создания репозитория необходимо выполнить команду *git init*  в папке с репозиторием, и у Вас создастся репозиторий (появится скрытая папка .git)

## Создание коммитов

### Git add

Для добавления измений в коммит используется команда *git add*. Чтобы использовать команду *git add* напишите *git add <имя файла>*

### Просмотр состояния репозитория

Для того, чтобы посмотреть состояние репозитория используется команда *git status*. Для этого необходимо в папке с репозиторием написать *git status*, и Вы увидите были ли измения в файлах, или их не было.

### Создание коммитов

Для того, чтобы создать коммит(сохранение) необходимо выполнить команду *git commit*. Выполняется она так: *git commit -m "<сообщение к коммиту>*. Все файлы для коммита должны быть ***ДОБАВЛЕНЫ*** и сообщение к коммиту писать ***ОБЯЗАТЕЛЬНО***.

## Перемещение между сохранениями

Для того, чтобы перемещаться между коммитами, используется команда *git checkout*. Используется она в папке с репозиторием следующим образом: *git checkout <номер коммита>*

## Журнал изменений

Для того, чтобы посмотреть все сделанные изменения в репозитории, используется команда *git log*. Для этого достаточно выполнить команду *git log* в папке с репозиторием

## Ветки в Git

### Создание ветки

Для того, чтобы создать ветку, используется команда *git branch*. Делается это следующим образом в папке с репозиторием: *git branch <имя новой ветки>*

### Слияние веток

Для того чтобы дабавить ветку в текущую ветку используется команда *git merge <имя branch>*

### Удаление веток

Для удаления ветки ввести команду *git branch -d <имя branch>*

## Работа с изображениями

Для того чтобы вставить изображение в текст нужно написать следующее:
![Название изображения](имя файла с изображением с указанием расширения)
Например:
![Это картинка](катинка.расширение)
## Синтаксис языка Markdown

### Ненумерованные списки

Для создания ненумерованных списков необходимо обозначить "звездочку" в начале строки.
Например:

* список 1
* список 2

### Нумерованные списки

Для создания нумерованных списков достаточно написать цифру-номер строки.
Например:

1. Список 1
2. Список 2

### Вложенные списки

Для создания вложенного списка необходимо поставить перед его пунктами табуляцию или несколько пробелов. В Markdown одна табуляция соответствует четырем пробелам.

### Жирный текст

Для выделения текста жирным шрифтом необходимо поставить перед текстом и в конце текста по две звездочки.
Например:

**жирный текст**

### Курсивный текст

Для выделения текста курсивом необходимо поставить перед текстом и в конце текста по одной звездочке.
Например:

*курсивный текст*

### Зачеркнутый текст

Для зачеркнутого текста необходимо поставить по два знака тильда в начале и в конце текста.
Например:

~~зачеркнутый текст~~

## Работа с удаленными репозиториями

### Что такое удаленный репозиторий?

Удаленный (иногда говорят "внешний") репозиторий – это версии вашего проекта, сохраненные на удаленном сервере. Доступ к репозиторию на таком сервере может осуществляться по интернету или по локальной сети.

Удаленный репозиторий – полноценный репозиторий, ничем не отличающийся от локального. У удаленного репозитория есть собственные ветки, собственный указатель HEAD, своя история коммитов и так далее.

Если мы подключим удаленный репозиторий к своему локальному, то у нас появятся копии всех ссылочных объектов удаленного репозитория. То есть, например, у удаленного репозитория есть ветка main, а у нас будет копия этой ветки – origin/main. Все такие ссылочные объекты (указатели, ветки и теги) удаленного репозитория хранятся почти там же, где и у локального – в директории .git/refs/remotes/<имя_удаленного_репозитория>. 

* *Принято называть удаленные ветки (то есть ветки удаленных репозиториев), приписывая к их названию имя удаленного репозитория. Например, если у нас есть удаленный репозиторий с именем origin и веткой main, то мы будем называть такую ветку origin/main. То же мы будем делать и со всеми остальными ссылочными объектами. Это может показаться излишним, но на самом деле это добавляет определенности и позволяет не запутаться в многочисленных названиях веток.*

 ### Настройка подключения удаленного репозитория. Группа команд git remote. 

 Необходимость подключить удаленный репозиторий к уже существующему локальному возникает в ситуациях, когда вы решаете выгрузить уже написанный код на удаленный сервер. Это нужно, чтобы другие разработчики смогли получить к нему доступ или чтобы вы сами могли заниматься разработкой с нескольких компьютеров (например, домашнего и рабочего). 

Для управления подключением удаленных репозиториев в Git предусмотрена целая группа команд – git remote. Мы рассмотрим самые частоиспользуемые команды из этой группы.

#### *Добавление удаленного репозитория к существующему локальному. Команда git remote add* 

Для того чтобы добавить удаленный репозиторий к вашему локальному репозиторию, необходимо выполнить команду git remote add.

Формат команды:
*git remote add <название удаленного репозитория> <ссылка на удаленный репозиторий>*

Пример:

*Подключим удаленный репозиторий под именем origin $ git remote add origin git@github.com:smartiqaorg/geometric_lib.git*

Имя удаленного репозитория в команде git remote add вы можете придумать сами. Впоследствии, при работе с этим удаленным репозиторием, вы будете обращаться к нему по придуманному имени. Принято называть удаленный репозиторий origin, но строго говоря, никаких ограничений здесь нет. 

Со ссылкой на удаленный репозиторий тоже все просто. Мы работаем с GitHub, поэтому эту ссылку можно взять, нажав на большую зеленую кнопку Code на странице репозитория на GitHub.

Вам предложат выбрать одну из трех ссылок: для протоколов https и ssh и для клиента GitHub на компьютер. Вот примеры этих трех ссылок для репозитория geometric_lib известного вам по практическим занятиям этого курса:

1. HTTPS-ссылка: https://github.com/smartiqaorg/geometric_lib.git
2. SSH-ссылка: git@github.com:smartiqaorg/geometric_lib.git
3. GitHub CLI ссылка: gh repo clone smartiqaorg/geometric_lib

Давайте разберемся, в чем отличие. Начнем с последней - эта ссылка используется в клиенте GitHub, который нужен для упрощения работы с Git. Этот клиент можно поставить отдельно, но его возможности значительно ограничены по сравнению с консольным вариантом Git. 

Итак, с последней ссылкой все понятно: ее нужно использовать в специальной программе для компьютера с графическим UI от создателей GitHub. Но в чем разница между первыми двумя? 

Дело в том, что существует два основных протокола подключения к git-серверу: HTTPS и SSH. SSH считается более надежным, но он немного сложнее в настройке. Давайте разберемся, как настроить подключение для каждого из них.

#### Настройка подключения по HTTPS

Раньше можно было подключаться по HTTPS, используя имя пользователя и пароль от аккаунта GitHub. Но потом эту возможность отключили в целях безопасности. Сейчас вместо пароля нужно использовать персональный токен.

Чтобы создать токен персонального доступа, следуйте инструкции: 
1. Подтвердите свой email-адрес, который вы использовали при регистрации аккаунта GitHub (если он не подтвержден).
2. Кликните на свою аватарку в правом верхнем углу, в открывшемся окне выберите Settings (Настройки):
3. Перед вами откроются настройки. В меню слева выберите Developer settings (Настройки разработчика).
4. Перед вами откроются Настройки разработчика. В меню слева выберите Personal access tokens (токены персонального доступа).
5. Нажмите Generate new token (сгенерировать новый токен). 
6. Придумайте имя для своего токена. Имя должно описывать, зачем токен был создан. 
7. Дайте токену разрешения. Пользователь токена сможет выполнять с удаленным репозиторием только то, что вы указали в этих разрешениях. Чтобы дать токену доступ к управлению удаленным репозиторием из командной строки, выберите repo.
8. Нажмите Generate token (сгенерировать токен).
Токен выглядит так:

*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*

9. Скопируйте токен. В целях безопасности, как только вы покинете страницу создания токена, вы больше не сможете просмотреть этот токен. 

При первой загрузке/скачивании изменений из удаленного репозитория, вас попросят ввести имя пользователя на GitHub и пароль. Нужно будет ввести свое имя пользователя, а вместо пароля вставить этот токен. 

#### Настройка подключения по SSH 

Чтобы настроить подключение по SSH, вам нужно на своем компьютере сгенерировать два SSH-ключа: публичный (public) и секретный (private). 

*Как работает SSH протокол и зачем ему ключи? Если коротко, то публичный ключ передается на удаленный сервер, а секретный все время остается с вами. Удаленный сервер использует публичный ключ, чтобы удостовериться, что у вас действительно есть секретный ключ. Как только сервер убеждается в наличии у вас секретного ключа, он понимает, что вы – это вы, ведь секретный ключ нельзя подделать.*

После создания пары ключей, надо добавить секретный ключ в SSH-агента. 

*SSH-агент – это специальная программа, которая сохраняет пароль от файла с секретным ключом и помогает удаленному серверу удостовериться, что вы действительно владеете секретным ключом. Благодаря SSH-агенту, вам не потребуется при каждом подключении к удаленному серверу вводить пароль от файла с приватным ключом.*

После останется только загрузить наш публичный ключ на GitHub и готово. Давайте рассмотрим этот процесс подробнее:

1. Откройте Git Bash (или терминал, если вы работаете на Linux/MacOS) 
2. Выполните в нем команду ssh-keygen -t rsa 4096 -C "<ваша-почта>@example.com"
* Вам предложат ввести путь к директории, в которой будет сохранен ключ, а также будет выведена директория для сохранения по умолчанию. Нажмите Enter, чтобы выбрать директорию по умолчанию, либо введите любую другую директорию и тоже нажмите Enter. 
* Затем вам предложат ввести пароль для файла с секретным ключом. Нажмите Enter, чтобы оставить файл без пароля, либо введите пароль и нажмите Enter. 
3. Теперь нужно добавить ключ в SSH-агента. Запустим агента командой eval `ssh-agent -s` 
4. Теперь выполните команду ssh-add <путь до приватного ключа>. Если вы оставили путь по умолчанию, ваша команда будет выглядеть так: ssh-add ~/.ssh/id_ed25519 
5. Отлично, последний этап: добавляем публичный ключ на GitHub. Для этого откройте файл с публичным ключом (он должен иметь расширение .pub). Если вы оставили путь по умолчанию, то ваш ключ будет располагаться по адресу ~/.ssh/id_ed25519.pub. 
6. Скопируйте содержимое файла. 
7. Перейдите в настройки GitHub.
8. Откройте раздел SSH and GPG keys (ssh и gpg ключи).
9. Нажмите New SSH key (новый ssh-ключ). 
10. В поле Title (заголовок) введите содержательное название ключа, например ключ для ноутбука или ключ рабочего компьютера.
11. Скопированный ключ вставьте в раздел Key (ключ) 
12. Нажмите Add SSH key (добавить ssh-ключ) 
13. Возможно потребуется ввести пароль для подтверждения действия. 

Теперь SSH-ключ добавлен. Вам больше не нужно вводить имя пользователя и пароль при каждой загрузке или скачивании изменений из удаленного репозитория.

#### Отключение удаленного репозитория от локального. Команда git remote remove

Иногда возникает необходимость забыть удаленный репозиторий. Для этого существует команда git remote remove.

Формат команды:
*git remote remove <название удаленного репозитория>*

Пример:
*Отключим удаленный репозиторий с именем origin*

$ git remote remove origin 

Данная команда предельно проста в использовании. В качестве имени репозитория нужно передавать то имя, которое вы указывали в команде git remote add. Данная команда не удаляет удаленный репозиторий с сервера, она удаляет только подключение вашего репозитория к удаленному.

#### Изменение имени удаленного репозитория. Просмотр всех удаленных репозиториев. Команды git remote rename, git remote show.

Иногда возникает необходимость переименовать удаленный репозиторий. Для этого существует команда git remote rename.

Формат команды:
*git remote rename <старое имя удаленного репозитория> <новое имя удаленного репозитория>*

Например:
*Переименуем удаленный репозиторий с origin на upstream*

$ git remote rename origin upstream

Еще более частая задача – просмотреть список всех подключенных удаленных репозиториев и получить информацию о каждом из них. Для этого существует команда git remote show. 

Формат команды:
*git remote show [имя удаленного репозитория]*

Например:

Выведем список всех удаленных репозиториев:

$ git remote show 

origin 

upstream 

Выведем информацию про репозиторий origin 

$ git remote show origin 

*remote origin 

Fetch URL: git@github.com:smartiqaorg/geometric_lib.git 

Push URL: git@github.com:smartiqaorg/geometric_lib.git 

HEAD branch: develop 

Remote branch: 

develop new (next fetch will store in remotes/origin) 

Local ref configured for 'git push': 

dev pushes to develop (up to date)

Таким образом можно просмотреть информацию о каждом из подключенных удаленных репозиториев. 
